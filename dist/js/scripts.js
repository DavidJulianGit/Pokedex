let pokemonRepository=function(){let e=[],t=[],n=document.getElementById("modalImg"),i=document.getElementById("modalTitle"),o=document.getElementById("modalHeight"),s=document.getElementById("modalWeight"),a=document.getElementById("modalTypes");function l(t){e.push(t)}function d(e){let t=document.querySelector("#pokemon-ul"),l=document.createElement("li"),d=document.createElement("button");d.innerText=e.name.charAt(0).toUpperCase()+e.name.slice(1),d.addEventListener("click",(t=>function(e){n.removeAttribute("src"),n.removeAttribute("alt"),i.innerText="",o.innerText="",s.innerText="",a.innerHTML="",c(e).then((()=>{!function(e){let t=e.name.charAt(0).toUpperCase()+e.name.slice(1);i.innerText=t,n.setAttribute("src",e.imageUrl),n.setAttribute("alt","Image of a Pokemon namend "+t),o.innerText=10*e.height+" cm",s.innerText=e.weight/10+" kg",a.innerHTML="",e.types.forEach((e=>{let t=document.createElement("li");t.classList.add("list-group-item"),t.classList.add("border-0"),t.classList.add("p-0"),t.classList.add("m-0"),t.classList.add("text-capitalize"),t.innerText=e.type.name,a.appendChild(t)}))}(e)}))}(e))),l.classList.add("list-group-item"),l.classList.add("list-group-item-action"),l.classList.add("text-center"),l.classList.add("px-0"),d.classList.add("btn"),d.classList.add("list-btn"),d.classList.add("w-100"),d.setAttribute("data-bs-toggle","modal"),d.setAttribute("data-bs-target","#pokeModal"),l.appendChild(d),t.appendChild(l)}function r(){document.querySelector("#pokemon-ul").innerHTML=""}function c(e){let t=e.detailsUrl;return fetch(t).then((e=>e.json())).then((t=>{console.log(t),e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types})).catch((e=>{console.error(e)}))}function m(){document.getElementById("loading").remove()}function u(e,t){return e.sort(((e,n)=>e[t]<n[t]?-1:e[t]>n[t]?1:0))}return{add:l,getAll:function(){return e},addListItem:d,loadList:function(){return function(){let e=document.querySelector("#pokemon-ul"),t=document.createElement("li");t.classList.add("list-group-item"),t.classList.add("list-group-item-action"),t.id="loading";const n='\n                                        <div class="d-flex justify-content-center">\n                                            <div class="spinner-border" role="status">\n                                            <span class="visually-hidden">Loading...</span>\n                                            </div>\n                                        </div>\n                                        ';t.innerHTML=n,e.appendChild(t)}(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then((e=>(m(),e.json()))).then((e=>{e.results.forEach(((e,t)=>{l({name:e.name,detailsUrl:e.url,index:t})}))})).catch((e=>{m(),console.error(e)}))},loadDetails:c,deleteAllListitems:r,sortListBy:function(n){let i=[];i=t.length>0?u(t,n):u(e,n),console.log(i),r(),i.forEach((e=>{d(e)}))},filterListBy:function(n){const i=e.filter((e=>e.name.slice(0,n.length)===n));t=i.slice(),r(),t.forEach((e=>{d(e)}))}}}(),btnSortByName=document.getElementById("btn-sort-name"),btnSortByIndex=document.getElementById("btn-sort-index"),inputSearch=document.getElementById("search"),btnResetSearch=document.getElementById("btnResetSearch");btnSortByName.addEventListener("click",(()=>pokemonRepository.sortListBy("name"))),btnSortByIndex.addEventListener("click",(()=>pokemonRepository.sortListBy("index"))),search.addEventListener("input",(e=>{""===e.target.value?btnResetSearch.disabled=!0:btnResetSearch.disabled=!1,pokemonRepository.filterListBy(e.target.value)})),btnResetSearch.addEventListener("click",(()=>{search.value="",pokemonRepository.filterListBy(""),btnResetSearch.disabled=!0})),pokemonRepository.loadList().then((()=>{pokemonRepository.getAll().forEach((e=>{pokemonRepository.addListItem(e)}))}));