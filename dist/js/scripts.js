let pokemonRepository=function(){let e=[],t=[];function n(t){e.push(t)}function o(e){let t=document.querySelector("#pokemon-ul"),n=document.createElement("li"),o=document.createElement("button");o.innerText=e.name.charAt(0).toUpperCase()+e.name.slice(1),o.addEventListener("click",t=>function(e){s(e).then(()=>{!function(e){let t=e.name.charAt(0).toUpperCase()+e.name.slice(1);document.getElementById("modalTitle").innerText=t;let n=document.getElementById("modalImg");n.setAttribute("src",e.imageUrl),n.setAttribute("alt","Image of a Pokemon namend "+t),document.getElementById("modalHeight").innerText=10*e.height+" cm",document.getElementById("modalWeight").innerText=e.weight/10+" kg";let o=document.getElementById("modalTypes");o.innerHTML="",e.types.forEach(e=>{let t=document.createElement("li");t.classList.add("list-group-item"),t.classList.add("border-0"),t.classList.add("p-0"),t.classList.add("m-0"),t.classList.add("text-capitalize"),t.innerText=e.type.name,o.appendChild(t)})}(e)})}(e)),n.classList.add("list-group-item"),n.classList.add("list-group-item-action"),n.classList.add("text-center"),n.classList.add("px-0"),o.classList.add("btn"),o.classList.add("list-btn"),o.classList.add("w-100"),o.setAttribute("data-bs-toggle","modal"),o.setAttribute("data-bs-target","#pokeModal"),n.appendChild(o),t.appendChild(n)}function i(){document.querySelector("#pokemon-ul").innerHTML=""}function s(e){let t=e.detailsUrl;return fetch(t).then(e=>e.json()).then(t=>{console.log(t),e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types}).catch(e=>{console.error(e)})}function l(){document.getElementById("loading").remove()}function a(e,t){return e.sort((e,n)=>e[t]<n[t]?-1:e[t]>n[t]?1:0)}return{add:n,getAll:function(){return e},addListItem:o,loadList:function(){return function(){let e=document.querySelector("#pokemon-ul"),t=document.createElement("li");t.classList.add("list-group-item"),t.classList.add("list-group-item-action"),t.id="loading";t.innerHTML='\n                                        <div class="d-flex justify-content-center">\n                                            <div class="spinner-border" role="status">\n                                            <span class="visually-hidden">Loading...</span>\n                                            </div>\n                                        </div>\n                                        ',e.appendChild(t)}(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(e=>(l(),e.json())).then(e=>{e.results.forEach((e,t)=>{n({name:e.name,detailsUrl:e.url,index:t})})}).catch(e=>{l(),console.error(e)})},loadDetails:s,deleteAllListitems:i,sortListBy:function(n){let s=[];s=t.length>0?a(t,n):a(e,n),console.log(s),i(),s.forEach(e=>{o(e)})},filterListBy:function(n){const s=e.filter(e=>e.name.slice(0,n.length)===n);t=s.slice(),i(),t.forEach(e=>{o(e)})}}}(),btnSortByName=document.getElementById("btn-sort-name"),btnSortByIndex=document.getElementById("btn-sort-index"),inputSearch=document.getElementById("search");btnSortByName.addEventListener("click",()=>pokemonRepository.sortListBy("name")),btnSortByIndex.addEventListener("click",()=>pokemonRepository.sortListBy("index")),search.addEventListener("input",e=>pokemonRepository.filterListBy(e.target.value)),pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(e=>{pokemonRepository.addListItem(e)})});